# 1 тестовое задание

## Установка
Установить можно с помощью докера. Из корневой папки необходимо запустить:
```bash 
$ docker-compose build
$ docker-compose up
```
Доступ к inventory-service по порту 3000
Доступ к hystory-service по порту 4000

## Inventory-Service
### `GET /api/products`  
Входные данные:
- get параметры:
  - plu - необязательно, устанавливает фильтр по plu
  - name - необязательно, устанавливает фильтр по name
   
  Описание:  
- Отдает все продукты в виде массива из обьектов в виде json.
Возможно использование фильтров по name и plu
### `POST /api/products`   
Входные данные:
- body:
    ```json
      {
        "plu": "артикул", // обязательно, соответствует plu у остатка
        "name": "название продукта" // обязательно
      }
    ```
Описание:
  - Создает продукт, возвращает созданный продукт в json
### `GET /api/stock`
Входные данные:
- get параметры:
- shopId - необязательно, устанавливает фильтр по айди магазина
- plu - необязательно, устанавливает фильтр по plu,
- shelfQuantity - необязательно, устанавливет фильтр по остатку на полках
- orderQuantity - необязательно, устанавливает фильтр по остатку в заказах  

Описание:
- Отдает все остатки с фильтрами (или без них)
### `POST /api/stock`  
  Входные данные:
  - body:
  ```json
   {
     "shopId": 2, // обязательно, айди магазина, к которому привязан остаток
     "plu": "plu продукта" // обязательно, plu товара, к которому привязывается остаток
     "shelfQuantity": 234421214 // необязательно, количество товара на полках
     "orderQuantity": 231312321 // необязательно, количество товара в заказе
   }
  ```
Описание:
   - Создает остаток, который привязан к магазину для продукта.
### `PUT /api/stock/orderquantity/update`
  Входные данные:
  - body:
  ```json
  {
     "plu": "plu остатка и продукта" // обязательно,
     "isIncrease": true // обязательно, указывает увеличивает (true), или уменьшает (false) остаток на 1
   }
   ```
Описание:
- Увеличивает или уменьшает на 1 остаток в заказах

### `PUT /api/stock/orderquantity/set`
  Входные данные:
  - body:
  ```json
  {
     "plu": "plu остатка и продукта" // обязательно,
     "quantity": 2321313 // обязательно, остаток
   }
   ```
  Описание:
  - Изменяет остаток в заказах

### `PUT /api/stock/shelfquantity/update`
Входные данные:
- body:
  ```json
  {
     "plu": "plu остатка и продукта" // обязательно
     "isIncrease": true // обязательно, указывает увеличивает (true), или уменьшает (false) остаток на 1
   }
   ```
Описание:
- Увеличивает или уменьшает на 1 остаток на полках

### `PUT /api/stock/shelfquantity/set`
Входные данные:
- body:
  ```json
  {
     "plu": "plu остатка и продукта" // обязательно
     "quantity": 2321313 // обязательно, остаток
   }
   ```
Описание:
- Изменяет остаток на полках

## History-service
### `GET /api/history`
Входные данные:
- get параметры:
  - shopId - необязательно, устанавливает фильтр по айди магазина,
  - plu - необязательно, устанавливает фильтр по plu
  - date - необязательно, устанавливает фильтр по дате
  - action - необязательно, устанавливает фильтр по действиям
  - page - стандартное значение - 1, отдает данные на конкретной странице,
  - limit - стандартное значение - 20, устанавливает количество записей на странице  
Описание:
  - Отдает историю с пагинацией и фильтрами (или без них)
### Все действия:
  - CREATE_PRODUCT
  - CREATE_STOCK
  - INCREASE_ORDER_STOCK
  - DECREASE_ORDER_STOCK
  - SET_ORDER_STOCK
  - INCREASE_SHELF_STOCK
  - DECREASE_SHELF_STOCK
  - SET_SHELF_STOCK  
